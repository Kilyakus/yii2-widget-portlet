"use strict";var WIDGET_PORTLET=function(a,b){var c=this,d=THEMEUTIL.get(a),e=THEMEUTIL.get("body");if(d){var f={bodyToggleSpeed:400,tooltips:!0,tools:{toggle:{collapse:"Collapse",expand:"Expand"},reload:"Reload",remove:"Remove",fullscreen:{on:"Fullscreen",off:"Exit Fullscreen"}},sticky:{offset:300,zIndex:101}},g={construct:function(a){return THEMEUTIL.data(d).has("portlet")?c=THEMEUTIL.data(d).get("portlet"):(g.init(a),g.build(),THEMEUTIL.data(d).set("portlet",c)),c},init:function(a){c.element=d,c.events=[],c.options=THEMEUTIL.deepExtend({},f,a),c.head=THEMEUTIL.child(d,".kt-portlet__head"),c.foot=THEMEUTIL.child(d,".kt-portlet__foot"),THEMEUTIL.child(d,".kt-portlet__body")?c.body=THEMEUTIL.child(d,".kt-portlet__body"):THEMEUTIL.child(d,".kt-form")&&(c.body=THEMEUTIL.child(d,".kt-form"))},build:function(){var a=THEMEUTIL.find(c.head,"[data-ktportlet-tool=remove]");a&&THEMEUTIL.addEvent(a,"click",function(a){a.preventDefault(),g.remove()});var b=THEMEUTIL.find(c.head,"[data-ktportlet-tool=reload]");b&&THEMEUTIL.addEvent(b,"click",function(a){a.preventDefault(),g.reload()});var d=THEMEUTIL.find(c.head,"[data-ktportlet-tool=toggle]");d&&THEMEUTIL.addEvent(d,"click",function(a){a.preventDefault(),g.toggle()});var e=THEMEUTIL.find(c.head,"[data-ktportlet-tool=fullscreen]");e&&THEMEUTIL.addEvent(e,"click",function(a){a.preventDefault(),g.fullscreen()}),g.setupTooltips()},initSticky:function(){c.options.sticky.offset;c.head&&window.addEventListener("scroll",g.onScrollSticky)},onScrollSticky:function(){var a=c.options.sticky.offset;if(!isNaN(a)){var b=document.documentElement.scrollTop;b>=a&&!1===THEMEUTIL.hasClass(e,"kt-portlet--sticky")?(g.eventTrigger("stickyOn"),THEMEUTIL.addClass(e,"kt-portlet--sticky"),THEMEUTIL.addClass(d,"kt-portlet--sticky"),g.updateSticky()):1.5*b<=a&&THEMEUTIL.hasClass(e,"kt-portlet--sticky")&&(g.eventTrigger("stickyOff"),THEMEUTIL.removeClass(e,"kt-portlet--sticky"),THEMEUTIL.removeClass(d,"kt-portlet--sticky"),g.resetSticky())}},updateSticky:function(){if(c.head){var a;if(THEMEUTIL.hasClass(e,"kt-portlet--sticky")){a=c.options.sticky.position.top instanceof Function?parseInt(c.options.sticky.position.top.call(this,c)):parseInt(c.options.sticky.position.top);var b=c.options.sticky.position.left instanceof Function?parseInt(c.options.sticky.position.left.call(this,c)):parseInt(c.options.sticky.position.left);var d;d=c.options.sticky.position.right instanceof Function?parseInt(c.options.sticky.position.right.call(this,c)):parseInt(c.options.sticky.position.right),THEMEUTIL.css(c.head,"z-index",c.options.sticky.zIndex),THEMEUTIL.css(c.head,"top",a+"px"),THEMEUTIL.css(c.head,"left",b+"px"),THEMEUTIL.css(c.head,"right",d+"px")}}},resetSticky:function(){c.head&&(!1!==THEMEUTIL.hasClass(e,"kt-portlet--sticky")||(THEMEUTIL.css(c.head,"z-index",""),THEMEUTIL.css(c.head,"top",""),THEMEUTIL.css(c.head,"left",""),THEMEUTIL.css(c.head,"right","")))},remove:function(){!1===g.eventTrigger("beforeRemove")||(THEMEUTIL.hasClass(e,"kt-portlet--fullscreen")&&THEMEUTIL.hasClass(d,"kt-portlet--fullscreen")&&g.fullscreen("off"),g.removeTooltips(),THEMEUTIL.remove(d),g.eventTrigger("afterRemove"))},setContent:function(a){a&&(c.body.innerHTML=a)},getBody:function(){return c.body},getSelf:function(){return d},setupTooltips:function(){if(c.options.tooltips){var a=THEMEUTIL.hasClass(d,"kt-portlet--collapse")||THEMEUTIL.hasClass(d,"kt-portlet--collapsed"),b=THEMEUTIL.hasClass(e,"kt-portlet--fullscreen")&&THEMEUTIL.hasClass(d,"kt-portlet--fullscreen"),f=THEMEUTIL.find(c.head,"[data-ktportlet-tool=remove]");if(f){var g=b?"bottom":"top",h=new Tooltip(f,{title:c.options.tools.remove,placement:g,offset:b?"0,10px,0,0":"0,5px",trigger:"hover",template:"<div class=\"tooltip tooltip-portlet tooltip bs-tooltip-"+g+"\" role=\"tooltip\"><div class=\"tooltip-arrow arrow\"></div><div class=\"tooltip-inner\"></div></div>"});THEMEUTIL.data(f).set("tooltip",h)}var i=THEMEUTIL.find(c.head,"[data-ktportlet-tool=reload]");if(i){var g=b?"bottom":"top",h=new Tooltip(i,{title:c.options.tools.reload,placement:g,offset:b?"0,10px,0,0":"0,5px",trigger:"hover",template:"<div class=\"tooltip tooltip-portlet tooltip bs-tooltip-"+g+"\" role=\"tooltip\"><div class=\"tooltip-arrow arrow\"></div><div class=\"tooltip-inner\"></div></div>"});THEMEUTIL.data(i).set("tooltip",h)}var j=THEMEUTIL.find(c.head,"[data-ktportlet-tool=toggle]");if(j){var g=b?"bottom":"top",h=new Tooltip(j,{title:a?c.options.tools.toggle.expand:c.options.tools.toggle.collapse,placement:g,offset:b?"0,10px,0,0":"0,5px",trigger:"hover",template:"<div class=\"tooltip tooltip-portlet tooltip bs-tooltip-"+g+"\" role=\"tooltip\"><div class=\"tooltip-arrow arrow\"></div><div class=\"tooltip-inner\"></div></div>"});THEMEUTIL.data(j).set("tooltip",h)}var k=THEMEUTIL.find(c.head,"[data-ktportlet-tool=fullscreen]");if(k){var g=b?"bottom":"top",h=new Tooltip(k,{title:b?c.options.tools.fullscreen.off:c.options.tools.fullscreen.on,placement:g,offset:b?"0,10px,0,0":"0,5px",trigger:"hover",template:"<div class=\"tooltip tooltip-portlet tooltip bs-tooltip-"+g+"\" role=\"tooltip\"><div class=\"tooltip-arrow arrow\"></div><div class=\"tooltip-inner\"></div></div>"});THEMEUTIL.data(k).set("tooltip",h)}}},removeTooltips:function(){if(c.options.tooltips){var a=THEMEUTIL.find(c.head,"[data-ktportlet-tool=remove]");a&&THEMEUTIL.data(a).has("tooltip")&&THEMEUTIL.data(a).get("tooltip").dispose();var b=THEMEUTIL.find(c.head,"[data-ktportlet-tool=reload]");b&&THEMEUTIL.data(b).has("tooltip")&&THEMEUTIL.data(b).get("tooltip").dispose();var d=THEMEUTIL.find(c.head,"[data-ktportlet-tool=toggle]");d&&THEMEUTIL.data(d).has("tooltip")&&THEMEUTIL.data(d).get("tooltip").dispose();var e=THEMEUTIL.find(c.head,"[data-ktportlet-tool=fullscreen]");e&&THEMEUTIL.data(e).has("tooltip")&&THEMEUTIL.data(e).get("tooltip").dispose()}},reload:function(){g.eventTrigger("reload")},toggle:function(){THEMEUTIL.hasClass(d,"kt-portlet--collapse")||THEMEUTIL.hasClass(d,"kt-portlet--collapsed")?g.expand():g.collapse()},collapse:function(){if(!1!==g.eventTrigger("beforeCollapse")){THEMEUTIL.slideUp(c.body,c.options.bodyToggleSpeed,function(){g.eventTrigger("afterCollapse")}),THEMEUTIL.addClass(d,"kt-portlet--collapse");var a=THEMEUTIL.find(c.head,"[data-ktportlet-tool=toggle]");a&&THEMEUTIL.data(a).has("tooltip")&&THEMEUTIL.data(a).get("tooltip").updateTitleContent(c.options.tools.toggle.expand)}},expand:function(){if(!1!==g.eventTrigger("beforeExpand")){THEMEUTIL.slideDown(c.body,c.options.bodyToggleSpeed,function(){g.eventTrigger("afterExpand")}),THEMEUTIL.removeClass(d,"kt-portlet--collapse"),THEMEUTIL.removeClass(d,"kt-portlet--collapsed");var a=THEMEUTIL.find(c.head,"[data-ktportlet-tool=toggle]");a&&THEMEUTIL.data(a).has("tooltip")&&THEMEUTIL.data(a).get("tooltip").updateTitleContent(c.options.tools.toggle.collapse)}},fullscreen:function(a){if("off"===a||THEMEUTIL.hasClass(e,"kt-portlet--fullscreen")&&THEMEUTIL.hasClass(d,"kt-portlet--fullscreen"))g.eventTrigger("beforeFullscreenOff"),THEMEUTIL.removeClass(e,"kt-portlet--fullscreen"),THEMEUTIL.removeClass(d,"kt-portlet--fullscreen"),g.removeTooltips(),g.setupTooltips(),c.foot&&(THEMEUTIL.css(c.body,"margin-bottom",""),THEMEUTIL.css(c.foot,"margin-top","")),g.eventTrigger("afterFullscreenOff");else{if(g.eventTrigger("beforeFullscreenOn"),THEMEUTIL.addClass(d,"kt-portlet--fullscreen"),THEMEUTIL.addClass(e,"kt-portlet--fullscreen"),g.removeTooltips(),g.setupTooltips(),c.foot){var b=parseInt(THEMEUTIL.css(c.foot,"height")),f=parseInt(THEMEUTIL.css(c.foot,"height"))+parseInt(THEMEUTIL.css(c.head,"height"));THEMEUTIL.css(c.body,"margin-bottom",b+"px"),THEMEUTIL.css(c.foot,"margin-top","-"+f+"px")}g.eventTrigger("afterFullscreenOn")}},eventTrigger:function(a){for(var b,d=0;d<c.events.length;d++)b=c.events[d],b.name==a&&(!0==b.one?!1==b.fired&&(c.events[d].fired=!0,b.handler.call(this,c)):b.handler.call(this,c))},addEvent:function(a,b,d){return c.events.push({name:a,handler:b,one:d,fired:!1}),c}};return c.setDefaults=function(a){f=a},c.remove=function(){return g.remove(html)},c.initSticky=function(){return g.initSticky()},c.updateSticky=function(){return g.updateSticky()},c.resetSticky=function(){return g.resetSticky()},c.destroySticky=function(){g.resetSticky(),window.removeEventListener("scroll",g.onScrollSticky)},c.reload=function(){return g.reload()},c.setContent=function(a){return g.setContent(a)},c.toggle=function(){return g.toggle()},c.collapse=function(){return g.collapse()},c.expand=function(){return g.expand()},c.fullscreen=function(){return g.fullscreen("on")},c.unFullscreen=function(){return g.fullscreen("off")},c.getBody=function(){return g.getBody()},c.getSelf=function(){return g.getSelf()},c.on=function(a,b){return g.addEvent(a,b)},c.one=function(a,b){return g.addEvent(a,b,!0)},g.construct.apply(c,[b]),c}};